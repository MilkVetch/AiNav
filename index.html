<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title id="pageTitle">网址导航</title>
    <link rel="stylesheet" href="style.css">
</head>
<body class="theme-classic">

    <div class="bg-glow" id="bgGlow"></div>

    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand" onclick="confirmReset()">
                <span id="navBrandText">网址导航</span>
                <div id="statusClickArea" title="Click to disconnect">
                    <span id="syncStatus" class="status-dot"></span>
                </div>
            </div>
            
            <div class="nav-actions">
                <button id="addSiteBtn" class="glass-btn hide" onclick="openCustomModal('siteModal')"></button>
                <button id="addCatBtn" class="glass-btn hide" onclick="openCustomModal('catModal')"></button>
                <button class="glass-btn primary" onclick="handleOpenSettings()">
                    <i data-lucide="settings" class="icon-sm"></i>
                    <span id="btnSettingsText">设置</span>
                </button>
            </div>
        </div>
    </nav>

    <main class="content-wrapper">
        <header class="hero-section">
            <h1 id="digitalClock">00:00</h1>
            <p id="greetingText">...</p>
            <div class="search-bar">
                <i data-lucide="search"></i>
                <input type="text" id="searchInput" onkeypress="handleSearch(event)">
            </div>
        </header>

        <div id="app">
            <div class="loading-state">
                <div class="spinner"></div>
                <p id="loadingText">同步中...</p>
            </div>
        </div>
    </main>

    <footer class="footer" id="footerText">
        © 2025 Khee. Crafted with ♥ for AI lovers.
    </footer>

    <div class="custom-overlay" id="modalOverlay" onclick="closeAllModals()"></div>

    <div class="custom-modal" id="settingsModal">
        <div class="modal-header">
            <h3 id="modalTitleSettings">系统设置</h3>
            <button class="close-btn" onclick="closeAllModals()">&times;</button>
        </div>
        <div class="modal-body">
            
            <div class="collapsible-section">
                <div class="collapsible-header" onclick="toggleSection('collapseLang')">
                    <span id="sectionLangText">语言设置 / Language</span> <i data-lucide="languages" class="icon-sm"></i>
                </div>
                <div class="collapsible-content" id="collapseLang">
                    <div class="btn-row">
                        <button class="action-btn-small flex-1" onclick="setLanguage('zh')">简体中文</button>
                        <button class="action-btn-small flex-1" onclick="setLanguage('en')">English</button>
                    </div>
                </div>
            </div>

            <div class="collapsible-section hide" id="boardSettingItem">
                <div class="collapsible-header" onclick="toggleSection('collapseBoards')">
                    <span id="sectionBoardText">面板设置</span> <i data-lucide="layers" class="icon-sm"></i>
                </div>
                <div class="collapsible-content" id="collapseBoards">
                    <label class="field-label" id="labelSwitchBoard">切换面板</label>
                    <select id="boardSwitcher" class="custom-select" onchange="switchBoard(this.value)"></select>
                    
                    <label class="field-label" id="labelRenameBoard">更名面板</label>
                    <div class="input-group">
                        <input type="text" id="siteTitleInput" class="custom-input">
                        <button class="action-btn-small" id="btnApplyRename" onclick="renameBoard()">应用</button>
                    </div>
                    
                    <div class="btn-row">
                        <button class="action-btn success" id="btnNewBoard" onclick="createNewBoard()">+ 新增</button>
                        <button class="action-btn danger" id="btnDelBoard" onclick="deleteCurrentBoard()">删除</button>
                    </div>
                </div>
            </div>

            <div class="collapsible-section hide" id="themeSettingItem">
                <div class="collapsible-header" onclick="toggleSection('collapseThemes')">
                    <span id="sectionThemeText">配色方案</span> <i data-lucide="palette" class="icon-sm"></i>
                </div>
                <div class="collapsible-content" id="collapseThemes">
                    <div class="theme-grid" id="themeList"></div>
                </div>
            </div>

            <div class="collapsible-section active" id="backendSettingItem">
                <div class="collapsible-header" onclick="toggleSection('collapseBackend')">
                    <span id="sectionBackendText">后端配置</span> <i data-lucide="database" class="icon-sm"></i>
                </div>
                <div class="collapsible-content" id="collapseBackend" style="display: block;">
                    <div class="input-field">
                        <label>GitHub Token</label>
                        <input type="password" id="ghToken" class="custom-input">
                    </div>
                    <div class="input-field">
                        <label>Gist ID</label>
                        <input type="text" id="gistId" class="custom-input">
                    </div>
                    <button class="save-btn" id="btnSaveConfig" onclick="saveSettings()">连接并保存</button>
                </div>
            </div>
        </div>
    </div>

    <div class="custom-modal" id="siteModal">
        <div class="modal-header"><h3 id="modalTitleSite">新增网址</h3><button class="close-btn" onclick="closeAllModals()">&times;</button></div>
        <div class="modal-body">
            <div class="input-field"><label id="labelSelectCat">选择分类</label><select id="targetCat" class="custom-select"></select></div>
            <div class="input-field"><label id="labelSiteName">名称</label><input type="text" id="siteName" class="custom-input"></div>
            <div class="input-field"><label id="labelSiteUrl">网址</label><input type="text" id="siteUrl" class="custom-input"></div>
            <button class="save-btn" id="btnConfirmSite" onclick="addItem()">确认</button>
        </div>
    </div>

    <div class="custom-modal" id="catModal">
        <div class="modal-header"><h3 id="modalTitleCat">新增分类</h3><button class="close-btn" onclick="closeAllModals()">&times;</button></div>
        <div class="modal-body">
            <div class="input-field"><label id="labelCatName">分类名称</label><input type="text" id="catName" class="custom-input"></div>
            <button class="save-btn" id="btnConfirmCat" onclick="addCategory()">确认</button>
        </div>
    </div>

    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="script.js"></script>
</body>
</html>